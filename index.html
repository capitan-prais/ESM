<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Contenidos</title>
    <style>
/* Variables CSS */
:root {
    --primary-color: #00796b;
    --secondary-color: #4caf50;
    --danger-color: #e53935;
    --light-color: #fafafa;
    --dark-color: #333;
    --bg-color: #f9fafb;
    --box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    --transition-speed: 0.3s;
    --scale-effect: 1.05;
}

/* Reset de márgenes y rellenos */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Animación de desvanecimiento */
@keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

/* Animación de desvanecimiento y movimiento suave hacia arriba */
@keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(30px); }
    100% { opacity: 1; transform: translateY(0); }
}

/* Animación de zoom para los botones y elementos interactivos */
@keyframes zoomIn {
    0% { transform: scale(0.9); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

/* Estilo global del cuerpo */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #2c3e50; /* Un tono oscuro profesional y suave */
    color: var(--dark-color);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    line-height: 1.6;
    animation: fadeIn 1s ease-out;
}

/* Contenedor principal */
.container {
    position: relative;
    width: 100%;
    max-width: 1300px;
    background-color: #fff;
    border-radius: 15px;
    box-shadow: var(--box-shadow);
    margin-top: 60px;
    text-align: center;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: fadeInUp 0.8s ease-out;
}

/* Logo y título */
#logo, #logo2 {
    width: 200px;
    display: block;
    margin: 20px 0;
    border-radius: 10px;
    transition: transform var(--transition-speed), filter var(--transition-speed);
    animation: fadeIn 1s ease-out;
}

/* Efecto de hover para el logo */
#logo:hover, #logo2:hover {
    transform: scale(1.1) rotate(5deg);
    filter: brightness(1.2);
}

/* Título principal */
h1 {
    font-size: 2.6em;
    color: var(--primary-color);
    font-weight: bold;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin: 100px 10px 30px  10px;
    text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.1);
    line-height: 1.4;
    animation: fadeInUp 1s ease-out;
}

/* Contenedor de la barra de búsqueda */
.search-container {
    z-index: 9999;
    width: 100%;
    max-width: 480px;
    margin-bottom: 30px;
    animation: fadeInUp 1s ease-out 0.2s;
}

/* Estilo para el input de búsqueda */
#searchInput {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 480px;
    padding: 15px 20px;
    font-size: 18px;
    border-radius: 50px;
    border: 2px solid #ccc;
    outline: none;
    transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
}

/* Estilo de foco para el input de búsqueda */
#searchInput:focus-visible {
    border-color: var(--primary-color);
    box-shadow: 0 0 8px rgba(0, 128, 128, 0.6);
}

/* Contenedor fijo en la parte inferior */
.contenedor-fijo {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%); /* Centrado horizontal */
    width: auto; /* Ajuste de ancho automático */
    max-width: 1300px; /* Definir un ancho máximo para no exceder el contenedor */
    background: linear-gradient(90deg, #00796b 0%, #004d40 100%); /* Degradado para un toque moderno */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); /* Sombra sutil para darle profundidad */
    padding: 15px 30px; /* Relleno más equilibrado */
    z-index: 1000;
    display: flex;
    justify-content: space-between; /* Espacio entre los elementos */
    align-items: center; /* Centrado vertical */
    border-top-left-radius: 10px; /* Bordes redondeados en la parte superior */
    border-top-right-radius: 10px;
    color: white;
    font-size: 1.1em;
    letter-spacing: 0.5px;
    font-weight: 500;
    transition: background 0.3s ease, box-shadow 0.3s ease; /* Efecto suave al cambiar */
}


/* Efecto hover para un cambio más elegante */
.contenedor-fijo:hover {
    background: linear-gradient(90deg, #004d40 0%, #00796b 100%); /* Invertir colores en el hover */
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2); /* Aumentar sombra al pasar el mouse */
}

/* Estilo para los elementos dentro del contenedor-fijo */
.contenedor-fijo {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    max-width: 1300px;
}

/* Espaciado entre los elementos dentro del contenedor */
.contenedor-fijo  > * {
    margin-right: 20px; /* Asegura que haya un espaciado entre los elementos */
}

/* Ajuste específico para el primer y último elemento dentro del contenedor para evitar margen extra */
.contenedor-fijo> *:first-child {
    margin-left: 0; /* El primer hijo no tendrá margen izquierdo */
}

.contenedor-fijo > *:last-child {
    margin-right: 0; /* El último hijo no tendrá margen derecho */
}

/* Opcional: Si se desean centrar más elementos en el contenedor */
.contenedor-fijo.centered {
    flex-grow: 1; /* Esta clase hará que un elemento crezca y ocupe el espacio disponible */
    text-align: center; /* Centrará el texto o los elementos dentro de este contenedor */
}

/* Diseño para botones, iconos o acciones dentro del contenedor */
.contenedor-fijo .action-btn {
    background-color: #fff;
    color: #00796b;
    padding: 10px 20px;
    border-radius: 25px;
    border: none;
    font-size: 1em;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.3s;
}

/* Efecto hover para los botones */
.contenedor-fijo .action-btn:hover {
    background-color: #004d40;
    color: #fff;
    transform: scale(1.05);
}

/* Estilo para el contenedor de contenido con animación */
.content {
    position: relative;
    font-weight: bold;  /* Hace el texto más destacado */
    font-size: 17px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
    padding: 8px;
    background-color: #f9fafb;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    justify-content: space-around;
    animation: fadeInExpand 0.6s ease-out; /* Aplicando la animación */
}

/* Efecto hover en el contenedor .content */
.content:hover {
    background-color: #e3fafe; /* Un color suave y agradable */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Nueva animación de desvanecimiento y expansión */
@keyframes fadeInExpand {
    0% {
        opacity: 0;
        transform: scale(5);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Responsividad para pantallas más pequeñas */
@media (max-width: 768px) {
    .content {
        width: 135%; /* Ajuste de ancho en pantallas pequeñas */
    }
}

/* Estilo de los botones del contenedor de las patentes */
button {
    color: #fff;
    border: none;
    padding: 5px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;  /* Hace el texto más destacado */
    min-width: 90px; /* Evita que los botones se encojan demasiado */
}

/* Efecto hover para los botones */
.btn-SALIDA:hover, .btn-light:hover, .btn-info:hover, .btn-warning:hover{
    transform: scale(1);  /* Efecto de aumento de tamaño */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* Sombra más intensa */
    letter-spacing: 1px; /* Mayor espacio entre letras */
}

/* Efecto active (cuando se hace clic) para los botones */
.btn-SALIDA:active, .btn-light:active, .btn-info:active, .btn-warning:active{
    transform: scale(0.98);  /* Efecto de reducción de tamaño */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Sombra más tenue */
}

/* Botón SALIDA */
.btn-SALIDA {
    background-color: #dc3545; /* Rojo claro */
}

.btn-SALIDA:hover {
    background-color: #ff4d4d; /* Rojo más brillante */
}

.btn-SALIDA:active {
    background-color: #e53935; /* Rojo más oscuro al hacer clic */
}

/* Botón lele ( btn-warning) */
.btn-warning{
    background-color: #004d40; /* Verde */
}

.btn-warning:hover {
    background-color: #009e83; /* Verde más brillante */
}

.btn-warning:active {
    background-color: #006c5a; /* Verde más oscuro */
}


/* Botón efectivo (btn-light) */
.btn-light {
    background-color: #28a745; /* Verde */
}

.btn-light:hover {
    background-color: #34d058; /* Verde más brillante */
}

.btn-light:active {
    background-color: #1e7e34; /* Verde más oscuro */
}

/* Botón tarjeta (btn-info) */
.btn-info {
    background-color: #0056b3; /* Azul */
}

.btn-info:hover {
    background-color: #007bff; /* Azul más brillante */
}

.btn-info:active {
    background-color: #004085; /* Azul más oscuro */
}

#contentContainer{
    position: relative;
    width: 100%;
}

div .content{
    width: 100%;
}

.btn-danger{
    margin-top: 300px;
    margin-bottom: 300px;
    background-color: red;
    color: white;
        
}

/* estilos para el logo de la pagina /////////////////////////////////////////////////////////*/

img#logo{
    position: absolute;  /* Posicionamiento absoluto respecto al body */
    margin: 10px 0px 0px 10px;
    top: 0;    
    z-index: 2;         /* Alineado con la parte izquierda de la página */
    width: 300px;         /* Puedes ajustar el tamaño */
    height: 80px;       /* Z-index alto para que quede encima de todo */
    pointer-events: none; /* Hace que la imagen no interfiera con la interacción con otros elementos */
    opacity: 0;
    transition: all 0.3s ease;
    animation: moveleft 3s ease-in-out forwards;
 }

 img#logo2{
    position: absolute;  /* Posicionamiento absoluto respecto al body */
    margin: 10px 0px 0px 10px;
    top: 0;     
    z-index: 1;          /* Alineado con la parte izquierda de la página */
    width: 300px;         /* Puedes ajustar el tamaño */
    height: 80px;        /* Z-index alto para que quede encima de todo */
    pointer-events: none; /* Hace que la imagen no interfiera con la interacción con otros elementos */
 }

 @keyframes moveleft {
            from {
                opacity: 0;
                transform: translateX(300px);
            }
            to {
                opacity: 1;
                transform: translateX(0); /* Ajusta según lo necesario */
            }
        }


/* boton que agrega patentes */ 

.btn-success {
            position: fixed;
            bottom: 50%;
            right: 0;
            z-index: 2;
            width: 160px;
            height: 80px;
            background-color: #218838;
            padding: 12px 20px;  /* Aumenta el padding */
            font-size: 18px;  /* Mayor tamaño de texto */
            font-weight: bold;  /* Hace el texto más destacado */
            border-radius: 10px;  /* Borde más redondeado */
            text-transform: uppercase; /* Pone el texto en mayúsculas */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Sombra suave */
            transition: all 0.3s ease;  /* Transición suave para efectos */
            opacity: 0;
            animation: bounceIn .5s ease-out forwards;
            animation-delay: 3.1s;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            25% {
                opacity: 1;
                transform: scale(1.25);
            }
            50% {
                opacity: 1;
                transform: scale(1.5);
            }
            75% {
                opacity: 1;
                transform: scale(1.25);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        /* Efecto hover */
.-success:hover {
    background-color: #3cc45c; /* Verde más oscuro */
    transform: scale(1.1);  /* Aumenta el tamaño */
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3); /* Sombra más intensa */
    letter-spacing: 2px; /* Aumenta el espaciado entre letras */
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); /* Agrega sombra al texto */
}

/* Efecto active (cuando se hace clic) */
.btn-success:active {
    background-color: #1e7e34; /* Verde aún más oscuro */
    transform: scale(0.98);  /* Reduce el tamaño */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Sombra más tenue */
} 

@media (max-width: 768px) {
    .btn-success{
        z-index: 99999;
        bottom: 15%;
    }
}

/* ocultamos todo lo que no queremos que salga al imprimir */
@media print {

    .btn-success, .btn-light, .btn-info{
        display: none;
    }
  .search-container {
    display: none;
  }

  .logo-imprimir{
    display: none;
  }

  .contenedor-fijo{
    position: relative;
  }

  
  .container-eliminar-imprimir{
    margin: 0px;
  }

  .btn-danger{
    display: none;
  }

  .btn-warning{
    display: none;
  }

}

/* Estilo básico para el modal aparece despues de apretar el boton de eliminar*/
#confirmModal {
            display: none; /* Ocultar por defecto */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 99999;
        }
        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
        }
        .modal-buttons {
            margin-top: 20px;
        }
        .modal-buttons button {
            color: #000;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
        }


        /* Estilo para los inputs creados dinámicamente */
.input-estilo {
    padding: 10px;
    margin: 10px 0;
    border: 2px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
    width: 100%;
    box-sizing: border-box; /* Para que el padding no afecte el tamaño total */
    transition: border-color 0.3s ease;
}

/* Estilo cuando el input está enfocado */
.input-estilo:focus {
    border-color: #0066cc;
    outline: none;
}

/* Si deseas darle un color de fondo o cambiar el estilo, puedes agregar más reglas */
.input-estilo::placeholder {
    color: #888;
}


.contenedor-interno {
    display: flex;
    flex-direction: column; /* Establece que los elementos se apilen en columna */
}

#cantidadBaños,
#precioBaños {
    margin-bottom: 10px; /* Espacio entre los elementos */
}

#addBañoBtn{
    padding: 15px;
    z-index: 99999999999;
}

#totalPatentesYBaño{
    font-size: 25px;
    
}


/* Asegura que los botones tengan el cursor normal de puntero cuando estén habilitados */
button:not([disabled]) {
    cursor: pointer;
}

/* Asegura que el cursor sea el estándar 'not-allowed' solo cuando el botón está deshabilitado */
button[disabled] {
    cursor: not-allowed;
}



    </style>
</head>
<body>
<!-- buscador -->

    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Buscar patente..." oninput="buscarPatente()">
    </div>

    <button id="addInputBtn" class="btn btn-success">Agregar Patente</button>
    
    <div class="container">
        
        <!-- logo /////////////////////-->
        
        <img id="logo" src="camaro.png" alt="Logo"> 
        <img id="logo2" src="hoja con titulo.jpg" alt="Logo">
       
        
        <h1>Estacionamiento<br>San Martín</h1>
        
        <div id="contentContainer"></div>
        
        <!-- Total Efectivo Display -->
        <div id="totalEfectivo">Total Efectivo: $0</div>
        
        <!-- Total Tarjetas Display -->
        <div id="totalTarjetas">Total Tarjetas: $0</div>
        
        <!-- Total Patentes Display (Suma de Efectivo y Tarjetas) -->
        <div id="totalPatentes">Total Patentes: $0</div>
        
        <!-- Total Patentes + Baño -->
        <div id="totalPatentesYBaño">Total Patentes y Baño: $0</div>
    </div>



    <!-- boton para eliminar lo de localstorage ////////////////////////// -->
     <div class="container-eliminar-imprimir">
         <button id="clearAllBtn" class="btn btn-danger">Eliminar Todo</button>

         
   <!-- botn para imprimir ////////////////////////////////////////////////////////////77 -->

   <img 
   onclick="window.print()"
     src="impresora2.png" 
     alt="Logo" 
     class="logo-imprimir" 
     id="imagen-logo"
     onmouseover="cambiarImagen()" 
     onmouseout="restaurarImagen()"
   >



<!-- Modal de confirmación -->
<div id="confirmModal">
    <div class="modal-content">
        <p>¿Ya enviaste el formulario por correo?</p>
        <div class="modal-buttons">
            <button onclick="eliminarContenido(true)">Sí</button>
            <button onclick="eliminarContenido(false)">No</button>
        </div>
    </div>
</div>


    

    <!-- Contenedor Baño -->
    <div class="contenedor-fijo" id="bathContainer">
      
      <div class="contenedor-interno">
          <span id="cantidadBaños">Cantidad: 0</span>
          <span id="precioBaños">total: $0</span>
      </div>
      <button id="addBañoBtn" class="btn btn-light">Agregar Baño</button>
    </div>

     

    <script>
        let totalEfectivo = 0; // Variable para mantener el total en efectivo
        let totalTarjetas = 0; // Variable para mantener el total con tarjeta
        let cantidadBaños = 0; // Contador de baños
        let precioBaños = 0; // Precio total de baños

        // Función para cargar el contenido guardado desde el localStorage
        function loadContent() {
            const savedContent = JSON.parse(localStorage.getItem('contentList'));
            const savedTotalEfectivo = JSON.parse(localStorage.getItem('totalEfectivo'));
            const savedTotalTarjetas = JSON.parse(localStorage.getItem('totalTarjetas'));
            const savedTotalPatentes = JSON.parse(localStorage.getItem('totalPatentes'));
            const savedCantidadBaños = JSON.parse(localStorage.getItem('cantidadBaños'));
            const savedPrecioBaños = JSON.parse(localStorage.getItem('precioBaños'));

            if (savedContent) {
                savedContent.forEach(function(item) {
                    addContent(item.text, item.creationTime, item.timePassed, item.price, item.backgroundColor);
                });
            }

            if (savedTotalEfectivo !== null) {
                totalEfectivo = savedTotalEfectivo;
                document.getElementById('totalEfectivo').textContent = `Total Efectivo: $${totalEfectivo}`;
            }

            if (savedTotalTarjetas !== null) {
                totalTarjetas = savedTotalTarjetas;
                document.getElementById('totalTarjetas').textContent = `Total Tarjetas: $${totalTarjetas}`;
            }

            if (savedTotalPatentes !== null) {
                const totalPatentes = savedTotalPatentes;
                document.getElementById('totalPatentes').textContent = `Total Patentes: $${totalPatentes}`;
            }
            if (savedCantidadBaños !== null) {
                cantidadBaños = savedCantidadBaños;
                document.getElementById('cantidadBaños').textContent = `Cantidad: ${cantidadBaños}`;
            }

            if (savedPrecioBaños !== null) {
                precioBaños = savedPrecioBaños;
                document.getElementById('precioBaños').textContent = `Precio Baño: $${precioBaños}`;
            }

            updateTotalPatentesYBaño(); // Asegurar que el total Patentes y Baño se actualice al cargar
        }

        // Función para agregar el contenido a la página y manejar el Tiempo
        function addContent(text, creationTime, timePassed, price, backgroundColor) {
            const contentDiv = document.createElement('div');
            contentDiv.classList.add('content');
            contentDiv.style.backgroundColor = backgroundColor || '';  // Aplicar el color de fondo guardado

            const contentText = document.createElement('p');
            contentText.textContent = text;
            contentDiv.appendChild(contentText);

            // Mostrar la Entrada
            const timeParagraph = document.createElement('p');
            timeParagraph.textContent = 'Entrada: ' + new Date(creationTime).toLocaleTimeString();
            contentDiv.appendChild(timeParagraph);

            // Guardar la Entrada en el contenedor
            contentDiv.dataset.creationTime = creationTime;

            // Botón para mostrar el Tiempo y el precio
            const timeButton = document.createElement('button');
            timeButton.classList.add('btn', 'btn-SALIDA');
            timeButton.textContent = 'Salida';
            contentDiv.appendChild(timeButton);

            // Área para mostrar el Tiempo
            const timeInfoDiv = document.createElement('div');
            timeInfoDiv.classList.add('time-info');
            timeInfoDiv.textContent = timePassed;
            contentDiv.appendChild(timeInfoDiv);

            // Área para mostrar el precio
            const priceInfoDiv = document.createElement('div');
            priceInfoDiv.classList.add('price-info');
            priceInfoDiv.textContent = price;
            contentDiv.appendChild(priceInfoDiv);

            // Función para mostrar el Tiempo y el precio
            timeButton.addEventListener('click', function () {
                const creationTime = new Date(contentDiv.dataset.creationTime);
                const ahora = new Date();

                // Calcular la diferencia en segundos
                const diferenciaSegundos = Math.floor((ahora - creationTime) / 1000);

                // Calcular la cantidad de minutos completos que han pasado
                const diferenciaMinutos = Math.ceil(diferenciaSegundos / 60); 

// Inicializar el precio
let precio = 200;

// Si han pasado más de 5 minutos, cobramos $40 por cada minuto adicional
if (diferenciaMinutos > 5) {
    const minutosAdicionales = diferenciaMinutos - 5;
    precio += minutosAdicionales * 40; // Precio adicional por cada minuto adicional
}

// Mostrar el Tiempo en el div correspondiente
timeInfoDiv.innerHTML = `Tiempo: ${diferenciaMinutos} minutos. Precio: ${precio} pesos.`;

                // Mostrar el precio en el div correspondiente
                priceInfoDiv.innerHTML = `Pagar: $${precio}`;

                // Crear los botones de Efectivo y Tarjeta al presionar el botón de Tiempo y precio
                const efectivoBtn = document.createElement('button');
                efectivoBtn.classList.add('btn', 'btn-light');
                efectivoBtn.textContent = 'Efectivo';

                const tarjetaBtn = document.createElement('button');
                tarjetaBtn.classList.add('btn', 'btn-info');
                tarjetaBtn.textContent = 'Tarjeta';

                // Añadir los botones a la div de contenido
                contentDiv.appendChild(efectivoBtn);
                contentDiv.appendChild(tarjetaBtn);

                // Función para cambiar el color a verde claro (Efectivo)
                efectivoBtn.addEventListener('click', function() {
                    contentDiv.style.backgroundColor = 'lightgreen';
                    totalEfectivo += precio; // Sumar el precio al total de efectivo
                    document.getElementById('totalEfectivo').textContent = `Total Efectivo: $${totalEfectivo}`;
                    updateTotalPatentes();  // Actualizar el total de Patentes
                    saveContent();  // Guardar el estado con el color actualizado
                });

                // Función para cambiar el color a azul claro (Tarjeta)
                tarjetaBtn.addEventListener('click', function() {
                    contentDiv.style.backgroundColor = 'lightblue';
                    totalTarjetas += precio; // Sumar el precio al total de tarjetas
                    document.getElementById('totalTarjetas').textContent = `Total Tarjetas: $${totalTarjetas}`;
                    updateTotalPatentes();  // Actualizar el total de Patentes
                    saveContent();  // Guardar el estado con el color actualizado
                });

                // Guardar el contenido actualizado después de calcular el Tiempo
                saveContent();
            });

            // Agregar el contenedor al contenido de la página
            document.getElementById('contentContainer').appendChild(contentDiv);
        }

        // Función para actualizar el total Patentes + Baño (suma de totalEfectivo + totalTarjetas + precioBaños)
        function updateTotalPatentesYBaño() {
            const totalPatentesYBaño = totalEfectivo + totalTarjetas + precioBaños;
            document.getElementById('totalPatentesYBaño').textContent = `Total Patentes y Baño: $${totalPatentesYBaño}`;
            // Guardar el total combinado de Patentes y Baño en el localStorage
            localStorage.setItem('totalPatentesYBaño', JSON.stringify(totalPatentesYBaño));
        }

        // Función para actualizar el total Patentes (suma de totalEfectivo + totalTarjetas)
        function updateTotalPatentes() {
            const totalPatentes = totalEfectivo + totalTarjetas;
            document.getElementById('totalPatentes').textContent = `Total Patentes: $${totalPatentes}`;
            // Guardar el total de Patentes en el localStorage
            localStorage.setItem('totalPatentes', JSON.stringify(totalPatentes));
            updateTotalPatentesYBaño(); // Actualizar el total combinado cuando cambia el total de Patentes
        }

        // Función para guardar el contenido en el localStorage
        function saveContent() {
            const contentList = [];
            const contentDivs = document.querySelectorAll('.content');
            contentDivs.forEach(function(div) {
                const text = div.querySelector('p').textContent;
                const creationTime = div.dataset.creationTime;
                const timePassed = div.querySelector('.time-info').innerHTML;
                const price = div.querySelector('.price-info').innerHTML;
                const backgroundColor = div.style.backgroundColor;  // Guardar el color de fondo
                contentList.push({ text, creationTime, timePassed, price, backgroundColor });
            });

            // Guardar los totales de efectivo, tarjetas y patentes
            localStorage.setItem('totalEfectivo', JSON.stringify(totalEfectivo));
            localStorage.setItem('totalTarjetas', JSON.stringify(totalTarjetas));

            // Guardar el contenido
            localStorage.setItem('contentList', JSON.stringify(contentList));
            localStorage.setItem('cantidadBaños', JSON.stringify(cantidadBaños));
            localStorage.setItem('precioBaños', JSON.stringify(precioBaños));
        }


        document.getElementById('addInputBtn').addEventListener('click', function () {  
    const container = document.createElement('div');
    container.classList.add('container');

    const input = document.createElement('input');
    input.type = 'text';
    
    // Asignar una clase al input para modificarlo con CSS
    input.classList.add('input-estilo');
    
    container.appendChild(input);

    // Asegurarnos de que el texto se vea en mayúsculas
    input.style.textTransform = 'uppercase'; // Aplica el estilo de mayúsculas
    input.addEventListener('input', function () {
        input.value = input.value.toUpperCase(); // Convierte el texto a mayúsculas mientras se escribe
    });

    // Añadir el contenedor al DOM
    document.getElementById('contentContainer').appendChild(container);

    // Asegurarnos de que el input se enfoque después de que el DOM se haya actualizado
    setTimeout(function() {
        input.focus();  // Esto debería asegurar que el input se enfoque correctamente

        // Asegurarse de que el input sea visible sin desplazar la página
        input.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }, 0);  // Ejecutarlo después de que el DOM haya procesado el cambio

    input.addEventListener('keydown', function (event) {
        if (event.key === 'Enter') {
            event.preventDefault(); // Evita el comportamiento predeterminado (como el desplazamiento hacia arriba)
            
            const text = input.value.trim();
            if (text) {
                const currentTime = new Date();

                // Crear el div con el contenido
                const contentDiv = document.createElement('div');
                contentDiv.classList.add('content');

                const contentText = document.createElement('p');
                contentText.textContent = text;
                contentDiv.appendChild(contentText);

                // Mostrar la Entrada
                const timeParagraph = document.createElement('p');
                timeParagraph.textContent = 'Entrada: ' + currentTime.toLocaleTimeString();
                contentDiv.appendChild(timeParagraph);

                // Guardar la Entrada en el contenedor
                contentDiv.dataset.creationTime = currentTime.toISOString();

                // Botón para mostrar el Tiempo y el precio
                const timeButton = document.createElement('button');
                timeButton.classList.add('btn', 'btn-SALIDA');
                timeButton.textContent = 'Salida';
                contentDiv.appendChild(timeButton);

                // Área para mostrar el Tiempo
                const timeInfoDiv = document.createElement('div');
                timeInfoDiv.classList.add('time-info');
                contentDiv.appendChild(timeInfoDiv);

                // Área para mostrar el precio
                const priceInfoDiv = document.createElement('div');
                priceInfoDiv.classList.add('price-info');
                contentDiv.appendChild(priceInfoDiv);

                // Calcular y mostrar el Tiempo y precio
                timeButton.addEventListener('click', function () {
                    // Deshabilitar el botón de salida después de presionar
                    timeButton.disabled = true;

                    const creationTime = new Date(contentDiv.dataset.creationTime); 
const ahora = new Date();

// Calcular la diferencia en segundos
const diferenciaSegundos = Math.floor((ahora - creationTime) / 1000);

// Calcular la cantidad de minutos completos que han pasado
const diferenciaMinutos = Math.ceil(diferenciaSegundos / 60); 

// Inicializar el precio
let precio = 200;

// Si han pasado más de 5 minutos, cobramos $40 por cada minuto adicional
if (diferenciaMinutos > 5) {
    const minutosAdicionales = diferenciaMinutos - 5;
    precio += minutosAdicionales * 40; // Precio adicional por cada minuto adicional
}

// Mostrar el Tiempo en el div correspondiente
timeInfoDiv.innerHTML = `Tiempo: ${diferenciaMinutos} minutos. Precio: ${precio} pesos.`;


                    // Mostrar el precio en el div correspondiente
                    priceInfoDiv.innerHTML = `Pagar: $${precio}`;

                    // Crear los botones de Efectivo y Tarjeta al presionar el botón de Tiempo y precio
                    const efectivoBtn = document.createElement('button');
                    efectivoBtn.classList.add('btn', 'btn-light');
                    efectivoBtn.textContent = 'Efectivo';

                    const tarjetaBtn = document.createElement('button');
                    tarjetaBtn.classList.add('btn', 'btn-info');
                    tarjetaBtn.textContent = 'Tarjeta';

                    // Crear el botón "Lele" que suma $500 al precio
                    const leleBtn = document.createElement('button');
                    leleBtn.classList.add('btn', 'btn-warning');
                    leleBtn.textContent = 'baño';
                    contentDiv.appendChild(leleBtn);

                    // Agregar el evento para el botón "Lele"
                    leleBtn.addEventListener('click', function () {
                        precio += 500; // Sumar $500 al precio
                        priceInfoDiv.innerHTML = `Pagar: $${precio}`; // Actualizar el precio
                    });

                    // Añadir los botones a la div de contenido
                    contentDiv.appendChild(efectivoBtn);
                    contentDiv.appendChild(tarjetaBtn);

                    // Función para cambiar el color a verde claro (Efectivo)
                    efectivoBtn.addEventListener('click', function() {
                        // Desactivar ambos botones después de presionar uno
                        efectivoBtn.disabled = true;
                        tarjetaBtn.disabled = true;
                        leleBtn.disabled = true;  // Deshabilitar el botón Lele

                        contentDiv.style.backgroundColor = 'lightgreen';
                        totalEfectivo += precio; // Sumar el precio al total de efectivo
                        document.getElementById('totalEfectivo').textContent = `Total Efectivo: $${totalEfectivo}`;
                        updateTotalPatentes();  // Actualizar el total de Patentes
                        saveContent();  // Guardar el estado con el color actualizado
                    });

                    // Función para cambiar el color a azul claro (Tarjeta)
                    tarjetaBtn.addEventListener('click', function() {
                        // Desactivar ambos botones después de presionar uno
                        efectivoBtn.disabled = true;
                        tarjetaBtn.disabled = true;
                        leleBtn.disabled = true;  // Deshabilitar el botón Lele

                        contentDiv.style.backgroundColor = 'lightblue';
                        totalTarjetas += precio; // Sumar el precio al total de tarjetas
                        document.getElementById('totalTarjetas').textContent = `Total Tarjetas: $${totalTarjetas}`;
                        updateTotalPatentes();  // Actualizar el total de Patentes
                        saveContent();  // Guardar el estado con el color actualizado
                    });

                    // Guardar el contenido actualizado después de calcular el Tiempo
                    saveContent();
                });

                // Eliminar el input
                container.remove();
                document.getElementById('contentContainer').appendChild(contentDiv);

                // Asegurarse de que el contenedor recién creado tenga el foco
                contentDiv.tabIndex = -1; // Hacer que el div sea enfocable
                contentDiv.focus(); // Enfocar el contenedor recién creado

                // Guardar el contenido después de agregarlo
                saveContent();
            }
        }
    });
});


        

                // Función para mostrar el modal de confirmación
function mostrarModal() {
    document.getElementById('confirmModal').style.display = 'flex';
}

// Función para cerrar el modal sin hacer nada
function cerrarModal() {
    document.getElementById('confirmModal').style.display = 'none';
}

// Función para eliminar todo el contenido del localStorage y reiniciar los valores
function eliminarContenido(confirmado) {
    if (confirmado) {
        // Eliminar los elementos específicos del localStorage
        localStorage.removeItem('contentList');
        localStorage.removeItem('totalEfectivo');
        localStorage.removeItem('totalTarjetas');
        localStorage.removeItem('totalPatentes');
        localStorage.removeItem('totalPatentesYBaño');
        localStorage.removeItem('cantidadBaños');
        localStorage.removeItem('precioBaños');

        // Reiniciar las variables a 0
        let totalEfectivo = 0;
        let totalTarjetas = 0;
        let cantidadBaños = 0;
        let precioBaños = 0;

        // Actualizar los valores en la página
        document.getElementById('totalEfectivo').textContent = `Total Efectivo: $${totalEfectivo}`;
        document.getElementById('totalTarjetas').textContent = `Total Tarjetas: $${totalTarjetas}`;
        document.getElementById('totalPatentes').textContent = `Total Patentes: $${totalEfectivo + totalTarjetas}`;
        document.getElementById('cantidadBaños').textContent = `Cantidad: ${cantidadBaños}`;
        document.getElementById('precioBaños').textContent = `Precio Baño: $${precioBaños}`;
        document.getElementById('totalPatentesYBaño').textContent = `Total Patentes y Baño: $0`;
        document.getElementById('contentContainer').innerHTML = '';

        // Recargar la página
        location.reload();
    }

    // Cerrar el modal sin hacer nada si la respuesta es "No"
    cerrarModal();
}

// Asignar el evento al botón para eliminar el contenido
document.getElementById('clearAllBtn').addEventListener('click', mostrarModal);




// funciones para el buscador////////////////////////////////////////////////////////////////////////

function buscarPatente() {
    const searchValue = document.getElementById('searchInput').value.toUpperCase();
    const contentContainers = document.querySelectorAll('.content');  // Seleccionamos los contenedores con la clase 'content'
    
    contentContainers.forEach(container => {
        const pText = container.querySelector('p').textContent.toUpperCase();  // Obtenemos el texto del <p> dentro del contenedor
        
        if (pText.includes(searchValue)) {
            container.style.display = 'flex';  // Mostrar el contenedor si coincide
        } else {
            container.style.display = 'none';  // Ocultar el contenedor si no coincide
        }
    });
}





        // Función para agregar un baño
        document.getElementById('addBañoBtn').addEventListener('click', function () {
            cantidadBaños += 1;
            precioBaños += 500;

            // Actualizar el contador de baños y el precio
            document.getElementById('cantidadBaños').textContent = `Cantidad: ${cantidadBaños}`;
            document.getElementById('precioBaños').textContent = `Precio Baño: $${precioBaños}`;

            // Actualizar el total de Patentes + Baño
            updateTotalPatentesYBaño();

            // Guardar los valores de cantidad y precio de baño
            saveContent();
        });

        // Cargar contenido guardado cuando la página se carga
        window.onload = loadContent;





 // funcion para el boton de la impresora (cambia la imagen al pasar el mause por encima de la imagen) ////////////////////////////////////////////////

    function cambiarImagen() {
    document.getElementById('imagen-logo').src = 'impresora.png'; // Cambia 'nueva-imagen.png' por la ruta de tu nueva imagen
  }

    function restaurarImagen() {
    document.getElementById('imagen-logo').src = 'impresora2.png'; // Restaura la imagen original
  }
    </script>
</body>
</html>



